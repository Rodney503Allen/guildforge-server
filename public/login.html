<!DOCTYPE html>
<html>
<head>
  <title>Guildforge | Login</title>

  <!-- CINZEL FONT -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700;900&display=swap" rel="stylesheet">

<style>
*{ box-sizing:border-box; }

:root{
  --bg0:#07090c;
  --bg1:#0b0f14;
  --panel:#0e131a;
  --panel2:#0a0f15;

  --ink:#d7dbe2;
  --muted:#9aa3af;

  --iron:#2b3440;
  --ember:#b64b2e;
  --blood:#7a1e1e;
  --bone:#c9b89a;

  --shadow: rgba(0,0,0,.60);
  --frame: rgba(255,255,255,.04);
  --glass: rgba(0,0,0,.18);
}

body{
  margin:0;
  min-height:100vh;
  color: var(--ink);
  font-family: 'Cinzel', serif;

  display:flex;
  justify-content:center;
  align-items:flex-start;   /* ðŸ‘ˆ was center */
  padding: 70px 0;          /* ðŸ‘ˆ gives breathing room */
  overflow-y:auto;          /* ðŸ‘ˆ was hidden */

  background:
    radial-gradient(1100px 600px at 18% 0%, rgba(182,75,46,.12), transparent 60%),
    radial-gradient(900px 500px at 82% 10%, rgba(122,30,30,.08), transparent 55%),
    linear-gradient(180deg, var(--bg1), var(--bg0));
}


/* grit overlay (replaces asfalt-dark vibe with same tech) */
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  opacity:.10;
  background:
    repeating-linear-gradient(0deg, rgba(255,255,255,.04) 0 1px, transparent 1px 3px),
    repeating-linear-gradient(90deg, rgba(0,0,0,.25) 0 2px, transparent 2px 7px);
  mix-blend-mode: overlay;
}

/* BACKGROUND STYLES (keep your assets, just align with new mood) */
#guildhall-bg{
  position: fixed;
  inset: 0;
  background: url('/images/backgrounds/guildhall_gate.png') center center / cover no-repeat;
  filter: brightness(0.55) saturate(0.9);
  z-index: -5;
}
.side-banner{
  position: fixed;
  top: 10%;
  width: 200px;
  height: 600px;
  background-size: cover;
  background-repeat: no-repeat;
  z-index: -3;
  opacity: 0.80;
  filter: brightness(0.85) saturate(0.85);
}
.left-banner{ left: 3%; background-image: url('/images/banners/guild_left.png'); }
.right-banner{ right: 3%; background-image: url('/images/banners/guild_right.png'); }

#embers-layer{
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: url('/images/effects/embers.png') repeat;
  mix-blend-mode: screen;
  opacity: 0.20;
  animation: emberFloat 12s linear infinite;
  z-index: -2;
}
@keyframes emberFloat{
  0% { transform: translateY(0); }
  100% { transform: translateY(-600px); }
}

/* Rune circles: cool, but make them less "gold flashy" */
.rune-circle{
  position: fixed;
  width: 520px;
  height: 520px;
  background-image: url('/images/effects/rune_circle.png');
  background-size: contain;
  background-repeat: no-repeat;
  opacity: 0.26;
  pointer-events: none;
  z-index: -1;

  animation:
    rotateRune 46s linear infinite,
    pulseGlow 4.2s ease-in-out infinite;
}

.rune1{
  left: 15%;
  top: 50%;
  transform: translate(-50%, -50%);
  animation:
    rotateRune 46s linear infinite,
    pulseGlow 4.2s ease-in-out infinite,
    driftRune1 28s ease-in-out infinite;
}

.rune2{
  right: 12%;
  top: 45%;
  transform: translate(50%, -50%);
  animation:
    rotateRune 64s linear infinite reverse,
    pulseGlow 5s ease-in-out infinite,
    driftRune2 32s ease-in-out infinite;
}

@keyframes rotateRune{
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes pulseGlow{
  0%{
    filter: drop-shadow(0 0 10px rgba(182,75,46,.35)) drop-shadow(0 0 22px rgba(122,30,30,.22));
    opacity: 0.20;
  }
  50%{
    filter: drop-shadow(0 0 20px rgba(182,75,46,.55)) drop-shadow(0 0 44px rgba(122,30,30,.30)) brightness(1.1);
    opacity: 0.34;
  }
  100%{
    filter: drop-shadow(0 0 10px rgba(182,75,46,.35)) drop-shadow(0 0 22px rgba(122,30,30,.22));
    opacity: 0.20;
  }
}

@keyframes driftRune1{
  0%   { transform: translate(-50%, -50%) rotate(0deg); }
  25%  { transform: translate(-40%, -40%) rotate(90deg); }
  50%  { transform: translate(-55%, -30%) rotate(180deg); }
  75%  { transform: translate(-60%, -45%) rotate(270deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}
@keyframes driftRune2{
  0%   { transform: translate(50%, -50%) rotate(0deg); }
  20%  { transform: translate(40%, -35%) rotate(60deg); }
  50%  { transform: translate(55%, -25%) rotate(180deg); }
  80%  { transform: translate(65%, -40%) rotate(300deg); }
  100% { transform: translate(50%, -50%) rotate(360deg); }
}

/* CONTAINER (main upgrade) */
.login-container{
  width: min(420px, 92vw);
  padding: 22px 20px 18px;
  border-radius: 14px;
  text-align: center;
  animation: fadeIn 1.0s ease;
  position: relative;

  border: 1px solid rgba(43,52,64,.95);
  background:
    radial-gradient(900px 260px at 18% 0%, rgba(182,75,46,.12), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,.22)),
    linear-gradient(180deg, var(--panel), var(--panel2));

  box-shadow: 0 18px 40px rgba(0,0,0,.65), inset 0 1px 0 rgba(255,255,255,.06);
}

.login-container::before{
  content:"";
  position:absolute;
  inset:10px;
  pointer-events:none;
  border: 1px solid var(--frame);
  border-radius: 12px;
}

@keyframes fadeIn{
  from{ opacity:0; transform: translateY(12px); }
  to{ opacity:1; transform: translateY(0); }
}

/* LOGO */
.logo{
  font-size: 30px;
  font-weight: 900;
  letter-spacing: 3.5px;
  color: var(--bone);
  text-shadow:
    0 0 10px rgba(182,75,46,.20),
    0 10px 18px rgba(0,0,0,.85);
  margin-bottom: 4px;
  position:relative;
  z-index:1;
}
.subtitle{
  font-size: 12px;
  color: var(--muted);
  letter-spacing: 2px;
  margin-bottom: 14px;
  opacity: 0.95;
  position:relative;
  z-index:1;
}

.divider{
  width: 86%;
  height: 1px;
  background: linear-gradient(to right, transparent, rgba(182,75,46,.65), transparent);
  margin: 12px auto 16px;
  opacity: .95;
  position:relative;
  z-index:1;
}

/* INPUTS */
input{
  display:block;
  width:100%;
  padding: 11px 12px;
  margin: 10px auto;
  border-radius: 10px;

  background: rgba(0,0,0,.22);
  border: 1px solid rgba(43,52,64,.95);

  color: var(--ink);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-size: 14px;
  text-align: center;

  box-shadow: inset 0 0 12px rgba(0,0,0,.75), inset 0 1px 0 rgba(255,255,255,.05);
  position:relative;
  z-index:1;
}

input::placeholder{ color: rgba(154,163,175,.85); }

input:focus{
  outline:none;
  border-color: rgba(182,75,46,.55);
  box-shadow:
    0 0 0 1px rgba(182,75,46,.12),
    inset 0 0 12px rgba(0,0,0,.75),
    inset 0 1px 0 rgba(255,255,255,.05);
}

/* BUTTON */
button{
  display:block;
  width:100%;
  padding: 12px;
  margin-top: 14px;
  border-radius: 10px;
  border: 1px solid rgba(182,75,46,.55);

  background: linear-gradient(180deg, rgba(182,75,46,.92), rgba(122,30,30,.88));
  color: #f3e7db;

  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight: 900;
  font-size: 13px;
  letter-spacing: .7px;
  text-transform: uppercase;

  cursor:pointer;
  transition: .12s ease;
  box-shadow: 0 14px 28px rgba(0,0,0,.65), inset 0 1px 0 rgba(255,255,255,.12);
  position:relative;
  z-index:1;
}

button:hover{
  filter: brightness(1.06);
  transform: translateY(-1px);
}

button:active{
  transform: translateY(0) scale(.99);
}

/* REGISTER LINK */
.register-link{
  margin-top: 12px;
  position:relative;
  z-index:1;
}
.register-link a{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding: 8px 10px;

  border-radius: 10px;
  border: 1px solid rgba(43,52,64,.95);
  background: rgba(0,0,0,.18);

  color: var(--ink);
  text-decoration:none;

  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-size: 12px;
  font-weight: 800;
  letter-spacing: .5px;
  text-transform: uppercase;

  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
  transition: .12s ease;
}

.register-link a:hover{
  border-color: rgba(182,75,46,.45);
  transform: translateY(-1px);
}

/* ERROR */
#msg{
  margin-top: 10px;
  color: #ffd6d6;
  font-size: 13px;
  min-height: 18px;
  text-shadow: 0 0 3px black;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  position:relative;
  z-index:1;
}

/* FOOTER */
.footer{
  margin-top: 14px;
  font-size: 11px;
  color: var(--muted);
  opacity: 0.85;
  position:relative;
  z-index:1;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* === MUSIC UI CONTAINER === */
.music-ui{
  position: absolute;
  bottom: 20px;
  right: 20px;
  display:flex;
  align-items:center;
  gap: 12px;
  z-index: 15;
}

/* === Torch button stays, just slightly toned to match === */
.mute-btn{
  width: 48px;
  height: 48px;
  border: none;
  cursor: pointer;
  background-size: cover;
  background-image: url('/images/ui/torch_on.png');
  filter: drop-shadow(0 0 10px rgba(0,0,0,.85));
  transition: 0.2s;
}
.mute-btn.muted{
  background-image: url('/images/ui/torch_off.png');
  opacity: 0.70;
}
.mute-btn:hover{ transform: scale(1.08); }

/* === Volume slider aligned with palette === */
#volume-slider{
  width: 160px;
  accent-color: rgba(182,75,46,.95);
  background: rgba(0,0,0,0.4);
  border: 1px solid rgba(43,52,64,.95);
  border-radius: 10px;
  height: 6px;
}

/* Responsive tweaks */
@media (max-width: 720px){
  .side-banner{ display:none; }
  .rune-circle{ opacity: .18; }
  .music-ui{ right: 12px; bottom: 12px; }
}
@media (max-width: 420px){
  .music-ui{ display:none; } /* optional: remove clutter on tiny screens */
}




:root{
  --bg0:#07090c;
  --bg1:#0b0f14;
  --panel:#0e131a;
  --panel2:#0a0f15;

  --ink:#d7dbe2;
  --muted:#9aa3af;

  --iron:#2b3440;
  --ember:#b64b2e;
  --blood:#7a1e1e;
  --bone:#c9b89a;

  --frame: rgba(255,255,255,.04);
}

/* layout */
.login-shell{
  width: min(520px, 94vw);   /* ðŸ‘ˆ controls stack width */
  margin: 0 auto;
  padding-top: 120px;        /* adjust if no statpanel */
  display: flex;
  flex-direction: column;    /* ðŸ‘ˆ stacked, not side-by-side */
  gap: 16px;
  align-items: center;
}

.login-container,
.news-card{
  width: 100%;
  max-width: 520px;    /* same width for both boxes */
}
@media (max-width: 920px){
  .login-shell{

    padding-top: 60px;
  }
}

/* reuse your panel feel */
.login-card,
.news-card{
  border-radius: 12px;
  border: 1px solid rgba(43,52,64,.95);
  background:
    radial-gradient(900px 260px at 18% 0%, rgba(182,75,46,.12), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,.20)),
    linear-gradient(180deg, var(--panel), var(--panel2));
  box-shadow: 0 18px 40px rgba(0,0,0,.65), inset 0 1px 0 rgba(255,255,255,.06);
  position: relative;
  overflow: hidden;
}

.login-card::before,
.news-card::before{
  content:"";
  position:absolute;
  inset:10px;
  pointer-events:none;
  border: 0;
  border-radius: 10px;
  opacity: .85;
}

.news-card{
  padding: 14px;
}

.news-head{
  position: relative;
  z-index: 1;
  padding-bottom: 10px;
  border-bottom: 1px solid rgba(43,52,64,.65);
  margin-bottom: 10px;
}

.news-head h3{
  margin:0;
  font-family: Cinzel, ui-serif, Georgia, "Times New Roman", serif;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--bone);
  font-size: 16px;
  text-shadow: 0 10px 18px rgba(0,0,0,.85);
}

.news-sub{
  margin-top: 4px;
  color: var(--muted);
  font-size: 12px;
  letter-spacing: .6px;
  text-transform: uppercase;
}

.news-list{
  position: relative;
  z-index: 1;
  max-height: 340px;      /* âœ… scrollable */
  overflow: auto;
  padding-right: 6px;      /* space for scrollbar */
}

/* nicer scrollbar (webkit) */
.news-list::-webkit-scrollbar{ width: 10px; }
.news-list::-webkit-scrollbar-thumb{
  background: rgba(182,75,46,.35);
  border: 1px solid rgba(43,52,64,.95);
  border-radius: 10px;
}
.news-list::-webkit-scrollbar-track{
  background: rgba(0,0,0,.18);
  border-radius: 10px;
}

.news-item{
  border: 1px solid rgba(43,52,64,.85);
  background: rgba(0,0,0,.16);
  border-radius: 12px;
  padding: 10px;
  margin-bottom: 10px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
}

.news-date{
  color: var(--muted);
  font-size: 11px;
  letter-spacing: .6px;
  text-transform: uppercase;
}

.news-title{
  margin-top: 4px;
  font-weight: 900;
  letter-spacing: .4px;
  color: var(--bone);
  font-size: 13px;
  text-transform: uppercase;
}

.news-body{
  margin-top: 6px;
  color: rgba(215,219,226,.92);
  font-size: 13px;
  line-height: 1.35;
}

</style>


</head>

<body>
<!-- BACKGROUND -->
  <div id="guildhall-bg"></div>
<div class="side-banner left-banner"></div>
<div class="side-banner right-banner"></div>
<div id="embers-layer"></div>
<div class="rune-circle rune1"></div>
<div class="rune-circle rune2"></div>






<div class="login-shell">

  <!-- LOGIN CARD (your existing login container moved here) -->
  <div class="login-container login-card">
    <div class="logo">GUILDFORGE</div>
    <div class="subtitle">ENTER THE REALM</div>

    <div class="divider"></div>

    <input id="name" placeholder="Username">
    <input id="pass" type="password" placeholder="Password">

    <button onclick="login()">ENTER WORLD</button><br>
    <div class="register-link">
      <a href="/register.html">Create New Adventurer</a>
    </div>
    
    <div id="msg"></div>

    <div class="footer">
      Forged in Battle. Bound by Guild.
    </div>
  </div>

  <!-- NEWS CARD -->
  <aside class="news-card" aria-label="Latest News">
    <div class="news-head">
      <h3>Latest Updates</h3>
      <div class="news-sub">Whatâ€™s new in Guildforge</div>
    </div>

    <div class="news-list" id="newsList">
      <div class="news-item">
        <div class="news-date">Feb 3, 2026</div>
        <div class="news-title">Combat Items in Battle</div>
        <div class="news-body">Potions now work properly in combat and respect HP/SP targets.</div>
      </div>

      <div class="news-item">
        <div class="news-date">Feb 2, 2026</div>
        <div class="news-title">Toast Notifications</div>
        <div class="news-body">Shop + sell pages now use the same themed toast system.</div>
      </div>

      <div class="news-item">
        <div class="news-date">Jan 26, 2026</div>
        <div class="news-title">World Combat UI</div>
        <div class="news-body">Combat modal close behavior improved and post-combat state added.</div>
      </div>
    </div>
  </aside>

</div>








<script>
async function login() {
  const name = document.getElementById("name").value;
  const password = document.getElementById("pass").value;

  const res = await fetch("/api/login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ name, password })
  });

  const data = await res.json();
  if (data.success) {
    window.location = data.redirect;
  } else {
    document.getElementById("msg").innerText = data.error || "The realm rejects you...";
  }
}
</script>
<!-- === BACKGROUND MUSIC PLAYER === -->
<audio id="bgm" loop>
    <source src="/music/GuildforgeMainTheme.ogg" type="audio/ogg">
    <source src="/music/guildforge_theme.mp3" type="audio/mpeg">
</audio>

<div id="music-controls" class="music-ui">
    <button id="mute-btn" class="mute-btn"></button>
    <input id="volume-slider" type="range" min="0" max="1" step="0.01">
</div>
<script>
document.addEventListener("DOMContentLoaded", () => {
    const bgm = document.getElementById("bgm");
    const muteBtn = document.getElementById("mute-btn");
    const slider = document.getElementById("volume-slider");

    // ===== LOAD SETTINGS =====
    let savedVolume = localStorage.getItem("bgm_volume");
    let savedMute   = localStorage.getItem("bgm_muted");

    bgm.volume = savedVolume !== null ? parseFloat(savedVolume) : 0.5;
    slider.value = bgm.volume;

    if (savedMute === "true") {
        bgm.muted = true;
        muteBtn.classList.add("muted");
    }

    // ===== AUTO-PLAY WORKAROUND =====
    // Some browsers block autoplay until user clicks somewhere
    const tryPlay = () => {
        bgm.play().catch(() => {});
        document.removeEventListener("click", tryPlay);
    };
    document.addEventListener("click", tryPlay);

    // ===== MUTE / UNMUTE =====
    muteBtn.addEventListener("click", () => {
        bgm.muted = !bgm.muted;
        muteBtn.classList.toggle("muted", bgm.muted);

        // Save state
        localStorage.setItem("bgm_muted", bgm.muted);
    });

    // ===== VOLUME CONTROL =====
    slider.addEventListener("input", () => {
        bgm.volume = slider.value;
        localStorage.setItem("bgm_volume", slider.value);
    });
});
</script>

</body>
</html>
