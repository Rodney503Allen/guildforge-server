<!DOCTYPE html>
<html>
<head>
  <title>Guildforge – Enter the Realm</title>

  <!-- CINZEL FONT -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700;900&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle at top, #1a0f05, #050509 70%);
  color: gold;
  font-family: 'Cinzel', serif;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

/* TEXTURE */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background: url("https://www.transparenttextures.com/patterns/asfalt-dark.png");
  opacity: 0.15;
  pointer-events: none;
}

/* CONTAINER */
.login-container {
  width: 360px;
  background: linear-gradient(#0b0a08, #050403);
  border: 2px solid gold;
  box-shadow:
    0 0 25px rgba(255,215,100,.4),
    inset 0 0 25px #000;
  padding: 26px 24px 30px;
  border-radius: 18px;
  text-align: center;
  animation: fadeIn 1.2s ease;
  box-sizing: border-box;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}

/* LOGO */
.logo {
  font-size: 36px;
  font-weight: 900;
  letter-spacing: 4px;
  color: gold;
  text-shadow:
    0 0 12px rgba(255,215,120,.7),
    0 0 35px rgba(255,170,0,.4);
  margin-bottom: 4px;
}

.subtitle {
  font-size: 13px;
  color: #c9a65a;
  letter-spacing: 2px;
  margin-bottom: 18px;
  opacity: 0.8;
}

.divider {
  width: 84%;
  height: 1px;
  background: linear-gradient(to right, transparent, gold, transparent);
  margin: 12px auto 18px;
}

/* INPUTS */
input {
  display: block;
  width: 100%;
  box-sizing: border-box;
  padding: 10px 12px;
  margin: 10px auto;
  border-radius: 8px;
  background: #0f0d0b;
  border: 1px solid rgba(255,215,100,.6);
  color: gold;
  font-family: Cinzel, serif;
  font-size: 14px;
  text-align: center;
  box-shadow: inset 0 0 6px #000;
}

input:focus {
  outline: none;
  border-color: gold;
  box-shadow: 0 0 10px rgba(255,215,120,.5);
}

/* BUTTON */
button {
  display: block;
  width: 100%;
  box-sizing: border-box;
  padding: 12px;
  margin-top: 16px;
  border-radius: 10px;
  border: none;
  background: linear-gradient(#c89b3c, #7d4f17);
  color: black;
  font-family: Cinzel, serif;
  font-weight: bold;
  font-size: 15px;
  cursor: pointer;
  transition: .15s;
  box-shadow: 0 0 14px rgba(255,192,90,.5);
}

button:hover {
  background: linear-gradient(#ffd876, #b5792c);
  box-shadow: 0 0 18px rgba(255,215,150,.9);
  transform: scale(1.02);
}

/* ERROR */
#msg {
  margin-top: 10px;
  color: #ff6868;
  font-size: 13px;
  min-height: 18px;
  text-shadow: 0 0 3px black;
}

/* FOOTER */
.footer {
  margin-top: 14px;
  font-size: 11px;
  color: #8a773f;
  opacity: 0.6;
}
/* === MUSIC UI CONTAINER === */
.music-ui {
    position: absolute;
    bottom: 20px;
    right: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    z-index: 15;
}

/* === Fantasy Mute Button (Torch Icon) === */
.mute-btn {
    width: 48px;
    height: 48px;
    border: none;
    cursor: pointer;
    background-size: cover;
    background-image: url('/images/ui/torch_on.png');
    filter: drop-shadow(0 0 6px #000);
    transition: 0.2s;
}

.mute-btn.muted {
    background-image: url('/images/ui/torch_off.png');
    opacity: 0.7;
}

.mute-btn:hover {
    transform: scale(1.1);
}

/* === Volume Slider (Fantasy Wooden Style) === */
#volume-slider {
    width: 150px;
    accent-color: #c8a34b; /* gold */
    background: rgba(0,0,0,0.4);
    border: 2px solid #c8a34b;
    border-radius: 6px;
    height: 6px;
}

/* BACKGROUND STYLES */
#guildhall-bg {
    position: fixed;
    inset: 0;
    background: url('/images/backgrounds/guildhall_gate.png') center center / cover no-repeat;
    filter: brightness(0.7);
    z-index: -5;
}
.side-banner {
    position: fixed;
    top: 10%;
    width: 200px;
    height: 600px;
    background-size: cover;
    background-repeat: no-repeat;
    z-index: -3;
    opacity: 0.9;
}

.left-banner {
    left: 3%;
    background-image: url('/images/banners/guild_left.png');
}

.right-banner {
    right: 3%;
    background-image: url('/images/banners/guild_right.png');
}
#embers-layer {
    position: fixed;
    inset: 0;
    pointer-events: none;
    background: url('/images/effects/embers.png') repeat;
    mix-blend-mode: screen;
    opacity: 0.25;
    animation: emberFloat 12s linear infinite;
    z-index: -2;
}

@keyframes emberFloat {
    0% { transform: translateY(0); }
    100% { transform: translateY(-600px); }
}
/* Base rune style */
.rune-circle {
    position: fixed;
    width: 520px;
    height: 520px;
    background-image: url('/images/effects/rune_circle.png');
    background-size: contain;
    background-repeat: no-repeat;
    opacity: 0.32;
    pointer-events: none;
    z-index: -1;

    animation: 
        rotateRune 40s linear infinite,
        pulseGlow 3.5s ease-in-out infinite;
}

/* ===============================
   RUNE 1 — starts mid-left
================================ */
.rune1 {
    left: 15%;
    top: 50%;
    transform: translate(-50%, -50%);

    animation:
        rotateRune 40s linear infinite,
        pulseGlow 3.5s ease-in-out infinite,
        driftRune1 28s ease-in-out infinite;
}

/* ===============================
   RUNE 2 — starts mid-right
================================ */
.rune2 {
    right: 12%;
    top: 45%;
    transform: translate(50%, -50%);

    animation:
        rotateRune 60s linear infinite reverse,
        pulseGlow 4s ease-in-out infinite,
        driftRune2 32s ease-in-out infinite;
}

/* ===============================
   Rotation
================================ */
@keyframes rotateRune {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ===============================
   Pulsing golden glow
================================ */
@keyframes pulseGlow {
    0% {
        filter: drop-shadow(0 0 10px #f6d37d) drop-shadow(0 0 20px #e0c07a);
        opacity: 0.25;
    }
    50% {
        filter: drop-shadow(0 0 25px #ffe9c2) drop-shadow(0 0 55px #ffda9f) brightness(1.3);
        opacity: 0.42;
    }
    100% {
        filter: drop-shadow(0 0 10px #f6d37d) drop-shadow(0 0 20px #e0c07a);
        opacity: 0.25;
    }
}

/* ===============================
   RUNE FLOAT PATHS
================================ */

/* Rune 1 drifting loop */
@keyframes driftRune1 {
    0%   { transform: translate(-50%, -50%) rotate(0deg); }
    25%  { transform: translate(-40%, -40%) rotate(90deg); }
    50%  { transform: translate(-55%, -30%) rotate(180deg); }
    75%  { transform: translate(-60%, -45%) rotate(270deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}

/* Rune 2 drifting loop */
@keyframes driftRune2 {
    0%   { transform: translate(50%, -50%) rotate(0deg); }
    20%  { transform: translate(40%, -35%) rotate(60deg); }
    50%  { transform: translate(55%, -25%) rotate(180deg); }
    80%  { transform: translate(65%, -40%) rotate(300deg); }
    100% { transform: translate(50%, -50%) rotate(360deg); }
}



</style>

</head>

<body>
<!-- BACKGROUND -->
  <div id="guildhall-bg"></div>
<div class="side-banner left-banner"></div>
<div class="side-banner right-banner"></div>
<div id="embers-layer"></div>
<div class="rune-circle rune1"></div>
<div class="rune-circle rune2"></div>






<div class="login-container">
  <div class="logo">GUILDFORGE</div>
  <div class="subtitle">ENTER THE REALM</div>

  <div class="divider"></div>

  <input id="name" placeholder="Adventurer Name">
  <input id="pass" type="password" placeholder="Secret Word">

  <button onclick="login()">ENTER WORLD</button></br>
  <div class="register-link">
    <a href="/register.html">Create New Adventurer</a>
  </div>

  <div id="msg"></div>

  <div class="footer">
    Forged in Battle. Bound by Guild.
  </div>
</div>

<script>
async function login() {
  const name = document.getElementById("name").value;
  const password = document.getElementById("pass").value;

  const res = await fetch("/api/login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ name, password })
  });

  const data = await res.json();
  if (data.success) {
    window.location = data.redirect;
  } else {
    document.getElementById("msg").innerText = data.error || "The realm rejects you...";
  }
}
</script>
<!-- === BACKGROUND MUSIC PLAYER === -->
<audio id="bgm" loop>
    <source src="/music/GuildforgeMainTheme.ogg" type="audio/ogg">
    <source src="/music/guildforge_theme.mp3" type="audio/mpeg">
</audio>

<div id="music-controls" class="music-ui">
    <button id="mute-btn" class="mute-btn"></button>
    <input id="volume-slider" type="range" min="0" max="1" step="0.01">
</div>
<script>
document.addEventListener("DOMContentLoaded", () => {
    const bgm = document.getElementById("bgm");
    const muteBtn = document.getElementById("mute-btn");
    const slider = document.getElementById("volume-slider");

    // ===== LOAD SETTINGS =====
    let savedVolume = localStorage.getItem("bgm_volume");
    let savedMute   = localStorage.getItem("bgm_muted");

    bgm.volume = savedVolume !== null ? parseFloat(savedVolume) : 0.5;
    slider.value = bgm.volume;

    if (savedMute === "true") {
        bgm.muted = true;
        muteBtn.classList.add("muted");
    }

    // ===== AUTO-PLAY WORKAROUND =====
    // Some browsers block autoplay until user clicks somewhere
    const tryPlay = () => {
        bgm.play().catch(() => {});
        document.removeEventListener("click", tryPlay);
    };
    document.addEventListener("click", tryPlay);

    // ===== MUTE / UNMUTE =====
    muteBtn.addEventListener("click", () => {
        bgm.muted = !bgm.muted;
        muteBtn.classList.toggle("muted", bgm.muted);

        // Save state
        localStorage.setItem("bgm_muted", bgm.muted);
    });

    // ===== VOLUME CONTROL =====
    slider.addEventListener("input", () => {
        bgm.volume = slider.value;
        localStorage.setItem("bgm_volume", slider.value);
    });
});
</script>

</body>
</html>
